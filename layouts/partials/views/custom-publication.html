<!-- layouts/partials/views/custom-publication.html -->
<div class="row">
  {{- range $idx, $item := .Pages -}}
  
  <!-- Publication Item -->
  <div class="col-12 mb-4">
    <div class="d-flex">
      
      <!-- Left: Publication Image -->
      <div class="flex-shrink-0 me-4">
        {{- if $item.Params.image.filename -}}
          {{- $image := $item.Resources.GetMatch (printf "*%s*" $item.Params.image.filename) -}}
          {{- if not $image -}}
            {{- $image = $item.Resources.GetMatch "featured*" -}}
          {{- end -}}
          {{- if $image -}}
            {{- $image = $image.Resize "150x150" -}}
            <img src="{{ $image.RelPermalink }}" alt="{{ $item.Title }}" class="img-fluid rounded" style="width: 150px; height: 150px; object-fit: cover;">
          {{- end -}}
        {{- else -}}
          {{- $image := $item.Resources.GetMatch "featured*" -}}
          {{- if $image -}}
            {{- $image = $image.Resize "150x150" -}}
            <img src="{{ $image.RelPermalink }}" alt="{{ $item.Title }}" class="img-fluid rounded" style="width: 150px; height: 150px; object-fit: cover;">
          {{- else -}}
            <!-- Placeholder if no image -->
            <div class="bg-light rounded d-flex align-items-center justify-content-center" style="width: 150px; height: 150px;">
              <i class="fas fa-file-alt fa-3x text-muted"></i>
            </div>
          {{- end -}}
        {{- end -}}
      </div>
      
      <!-- Right: Publication Details -->
      <div class="flex-grow-1">
        
        <!-- Title with Link -->
        <h4 class="mb-2">
          {{- if $item.Params.url_pdf -}}
            <a href="{{ $item.Params.url_pdf }}" target="_blank" class="text-danger text-decoration-none publication-title">
              {{ $item.Title }}
            </a>
          {{- else if $item.RelPermalink -}}
            <a href="{{ $item.RelPermalink }}" class="text-danger text-decoration-none publication-title">
              {{ $item.Title }}
            </a>
          {{- else -}}
            <span class="text-danger publication-title">{{ $item.Title }}</span>
          {{- end -}}
        </h4>
        
        <!-- Authors -->
        <div class="mb-2">
          <span class="text-muted">
            {{- if $item.Params.authors -}}
              {{- $authors := $item.Params.authors -}}
              {{- range $i, $author := $authors -}}
                {{- if $i -}}, {{ end -}}
                <span class="author-name">{{ $author }}</span>
              {{- end -}}
            {{- end -}}
          </span>
        </div>
        
        <!-- Publication Venue -->
        {{- if $item.Params.publication -}}
        <div class="mb-2">
          <span class="fw-bold text-dark">{{ $item.Params.publication }}</span>
        </div>
        {{- end -}}
        
        <!-- Awards -->
        {{- if $item.Params.awards -}}
        <div class="mb-2">
          {{- range $item.Params.awards -}}
          <span class="badge bg-danger text-white me-2">{{ . }}</span>
          {{- end -}}
        </div>
        {{- end -}}
        
        <!-- Links -->
        <div class="publication-links">
          {{- if $item.Params.url_code -}}
          <a href="{{ $item.Params.url_code }}" target="_blank" class="btn btn-sm btn-outline-danger me-2">
            [Code]
          </a>
          {{- end -}}
          
          {{- if $item.Params.url_pdf -}}
          <a href="{{ $item.Params.url_pdf }}" target="_blank" class="btn btn-sm btn-outline-primary me-2">
            [PDF]
          </a>
          {{- end -}}
          
          {{- if $item.Params.url_slides -}}
          <a href="{{ $item.Params.url_slides }}" target="_blank" class="btn btn-sm btn-outline-success me-2">
            [Slides]
          </a>
          {{- end -}}
          
          {{- if $item.Params.url_project -}}
          <a href="{{ $item.Params.url_project }}" target="_blank" class="btn btn-sm btn-outline-info me-2">
            [Project]
          </a>
          {{- end -}}
        </div>
        
      </div>
    </div>
  </div>
  
  {{- end -}}
</div>

<!-- Custom CSS for Publication Layout -->
<style>
.publication-title {
  font-weight: 600;
  line-height: 1.3;
}

.publication-title:hover {
  text-decoration: underline !important;
}

.author-name {
  font-size: 0.95rem;
}

.publication-links .btn {
  font-size: 0.85rem;
  padding: 0.25rem 0.75rem;
  border-radius: 15px;
}

.publication-links .btn-outline-danger {
  color: #dc3545;
  border-color: #dc3545;
}

.publication-links .btn-outline-danger:hover {
  background-color: #dc3545;
  color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .d-flex {
    flex-direction: column !important;
  }
  
  .flex-shrink-0 {
    margin-bottom: 1rem !important;
    margin-right: 0 !important;
    text-align: center;
  }
}
</style>